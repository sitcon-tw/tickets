---
title: 前端概覽
description: Next.js App Router 架構與主要功能模組
---

## 技術棧

- **Next.js 15**（App Router）：`app/` 下以多語路由 `app/[locale]/...` 組織頁面
- **React 19** 與伺服端/用戶端元件混搭
- **next-intl 4**：語系處理 (`frontend/i18n/*`)
- **Tailwind CSS 4**：透過 `globals.css` 搭配 `tw-animate-css`
- **styled-components** 與 `class-variance-authority` 協助樣式組合
- **Chart.js`, `@react-three/*`** 等 UI 套件支援動畫、3D 與統計

## 目錄結構

| 位置 | 說明 |
| --- | --- |
| `app/` | Next.js App Router 頁面與 API Route，含 `globals.css`, `layout.tsx`, `not-found.tsx` |
| `app/[locale]/` | 依語系拆分：公開頁面、報名流程、後台管理皆在此層 |
| `components/` | 公用 UI 元件（Navigation、Loading、表單、QRCode 等）|
| `components/form/` | 報名表單組件，配合 `EventFormFields` 動態顯示 |
| `contexts/` | React Context，如 `AlertContext` 負責全域提示訊息 |
| `lib/` | 工具與 API 呼叫封裝，`lib/utils.ts` 提供 `cn()` 合併 className |
| `lib/api/` | 封裝後端 API 呼叫與型別定義 |
| `lib/types/` | 共用 TypeScript 型別，盡量與後端 schema 對齊 |
| `middleware.ts` | next-intl Middleware，強制語系前綴並略過 API/static |
| `public/` | 靜態資產、字體、`robots.txt` |

## Layout 與 Metadata

`app/layout.tsx`：

- 引入 Geist 字體（Sans/Mono），並設定 `<meta>` 基本資訊
- 在 `<head>` 區塊加入 viewport、theme-color 等標籤
- `<GoogleTagManager>` 以 `GTM-NPVBCDZ` 追蹤使用者行為

## 多語系路由

- `i18n/routing.ts` 宣告 `en`, `zh-Hant`, `zh-Hans` 三種語系，`localePrefix: "always"`
- `middleware.ts` 依據 URL 自動導向對應語系路徑
- 建議將文案放在對應 `app/[locale]/(namespace)/messages.json` 或等效結構，`next-intl` 會於 server/client 取得翻譯

## 狀態管理

- 以 React Context 處理全域狀態，例如提醒框、使用者 session 等
- 對於 API 呼叫結果，使用 `lib/api` 的封裝函式，確保回應結構與後端統一

## 開發注意事項

- 新增頁面時同步建立語系檔案並更新導覽（`components/Nav.tsx`, `components/AdminNav.tsx`）
- 利用 `PageSpinner`, `TopLoadingBar` 提供良好載入體驗
- 若需整合新的第三方資源，記得於 `next.config.ts` 與 `content-security-policy` 做對應調整
